<!--pages/shoppingcat/shoppingcart.wxml-->
<scroll-view class="scrollview" scroll-top="{{scrollTop}}" scroll-y bindscroll="checkBackTop">
  <view class='car-body'>

    <view wx:for="{{shoppingCartList}}" wx:for-index="idx" wx:key="idx" class='car-area clearfix'>
      <view class="area-name {{item.isActive?'active':''}}">
        <view class='area-name-wrap'>
          <image src="{{item.isActive?'../../image/area_active.png':'../../image/area.png'}}"/>
          <text>{{item.area}}</text>
        </view>
      </view>
      <view wx:for="{{item.shops}}" wx:for-item="shop" wx:for-index="shopidx" wx:key="shopidx"  bindtap="jumpShop" data-shopid="{{shop.shopId}}" data-active="{{item.isActive?'active':''}}" class='car-order active clearfix'>
        <view class='car-name'>
          <image src="../../image/nearby.png"/>
          <text class='s-name'>{{shop.name}}</text>
          <text class='gt'>></text>
        </view>
        <view class='car-goods-list clearfix'>

          <view wx:for="{{shop.goodsList}}"
                wx:for-item="good" wx:for-index="goodidx" 
                wx:key="goodidx" class="car-container {{good.isTouchMove ? 'touch-move-active' : ''}}"
                data-index="{{idx+'#'+shopidx+'#'+goodidx}}" 
                bindtouchstart="touchstart" bindtouchmove="touchmove" >
            <view class='car-good'>
              <image src="{{good.img}}"/>
              <text class="car-good-name">{{good.name}}</text>
              <view class='car-good-info'>
                <text class='car-good-price'>￥{{good.price}}</text>
                <text class='car-good-num'>X{{good.num}}</text>
              </view>
            </view>
            <view class="del" catchtap="del" data-index="{{idx+'#'+shopidx+'#'+goodidx}}">删除</view>
          </view>

        </view>
      </view>

    </view>

    <view class='clear-invalid'>
      <button bindtap="clearInvalid">清空失效商品</button>
    </view>
  </view>
  <view class='padding-100'></view>
</scroll-view>
<image catchtap="goTop" class="'top' {{backTopIconShowFlag==true?'active':''}}" src='../../image/top.png'/>


<!--footer-->
<import src="../footer/footer.wxml"/>
<template is="footer" data="{{tabbarArray}}"></template>